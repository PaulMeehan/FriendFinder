<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8" />

    <title>Friend Finder</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <link rel="stylesheet" type="text/css" href="style.css">

</head>

<body>

    <div class="container">
        <div class="row">
            <div class="col-sm-1">
                <!-- blank -->
            </div>
            <div class="col-sm-10">
                <div class="row">
                    <div class="col-sm-12">
                        <h1>Survey Questions:</h1>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12">
                        <h2>About You:</h2>
                        Name (Required):<br />
                        <input type="text" id="name" size="122"><br />
                        Link to Photo Image (Required):<br />
                        <input type="text" id="image" size="122">
                        <br /><br />

                    </div>
                </div>

                <div class="row survey">
                    <div class="col-sm-12">

                        <h2>Question 1:</h2>
                        <p>I make friends easily</p>
                        <select class="chosen-select" id="Question1">
                            <option value></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                        <br /><br />

                        <h2>Question 2:</h2>
                        <p>I love large parties</p>
                        <select class="chosen-select" id="Question2">
                            <option value></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                        <br /><br />

                        <h2>Question 3:</h2>
                        <p>I worry about things</p>
                        <select class="chosen-select" id="Question3">
                            <option value></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                        <br /><br />

                        <h2>Question 4:</h2>
                        <p>I prefer to be in charge of most situations</p>
                        <select class="chosen-select" id="Question4">
                            <option value></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                        <br /><br />

                        <h2>Question 5:</h2>
                        <p>I prefer variety to routine</p>
                        <select class="chosen-select" id="Question5">
                            <option value></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                        <br /><br />

                        <h2>Question 6:</h2>
                        <p>I trust others</p>
                        <select class="chosen-select" id="Question6">
                            <option value></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                        <br /><br />

                        <h2>Question 7:</h2>
                        <p>I dislike being the center of attention</p>
                        <select class="chosen-select" id="Question7">
                            <option value></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                        <br /><br />

                        <h2>Question 8:</h2>
                        <p>I like my house to be clean</p>
                        <select class="chosen-select" id="Question8">
                            <option value></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                        <br /><br />

                        <h2>Question 9:</h2>
                        <p>I get chores done right away</p>
                        <select class="chosen-select" id="Question9">
                            <option value></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                        <br /><br />

                        <h2>Question 10:</h2>
                        <p>I seek adventure</p>
                        <select class="chosen-select" id="Question10">
                            <option value></option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                        <br /><br />

                    </div>

                </div>

                <div class="row">
                    <div class="col-sm-12">
                        <button type="button" class="btn btn-primary btn-block" id="submit">Submit</button>
                    </div>
                </div>
                
            </div>
            <div class="col-sm-1">
                <!-- blank -->
            </div>
        </div>
    </div>


    <!-- The Modal -->
    <div id="myModal" class="modal">
    
        <!-- Modal content -->
        <div class="modal-content mclass">
            <span class="close">&times;</span>
            <p class="mp">Best Match:</p>
            <p class="mp" id="score"></p>
            <p class="mpname" id="bestMatchName"></p>
            <img id="bestMatchImage" alt="picture not found" src="blank.jpg" width="184" class="images">
        </div>
    
    </div>



    <script type="text/javascript">
        $("#submit").on("click", function (event) {
            event.preventDefault();

            var name = $("#name").val();
            var image = $("#image").val();
            var Q1 = $("#Question1").val();
            var Q2 = $("#Question2").val();
            var Q3 = $("#Question3").val();
            var Q4 = $("#Question4").val();
            var Q5 = $("#Question5").val();
            var Q6 = $("#Question6").val();
            var Q7 = $("#Question7").val();
            var Q8 = $("#Question8").val();
            var Q9 = $("#Question9").val();
            var Q10 = $("#Question10").val();

            var testSize = Q1 + Q2 + Q3 + Q4 + Q5 + Q6 + Q7 + Q8 + Q9 + Q10;
            if (name.length === 0 || image.length === 0 || testSize.length < 10) {
                alert("Please be sure to answer all questions before clicking the Submit button.");
            } else {

                var responses = {
                    name: "'" + name + "'",
                    image: "'" + image + "'",
                    Q1: parseInt(Q1),
                    Q2: parseInt(Q2),
                    Q3: parseInt(Q3),
                    Q4: parseInt(Q4),
                    Q5: parseInt(Q5),
                    Q6: parseInt(Q6),
                    Q7: parseInt(Q7),
                    Q8: parseInt(Q8),
                    Q9: parseInt(Q9),
                    Q10: parseInt(Q10)
                };


                $.post("/api/friends", responses, function (result) {
                    if (result.match) {
                        alert("success");
                    } else {
                        alert("failed");
                    };
                    $("#name").val("");
                    $("#image").val("");
                    $("#Question1").val("");
                    $("#Question2").val("");
                    $("#Question3").val("");
                    $("#Question4").val("");
                    $("#Question5").val("");
                    $("#Question6").val("");
                    $("#Question7").val("");
                    $("#Question8").val("");
                    $("#Question9").val("");
                    $("#Question10").val("");

                    // Get the modal
                    var modal = $("#myModal")[0];

                    // Get the <span> element that closes the modal
                    var span = $(".close")[0];

                    $("#bestMatchName").text(result.name);
                    $("#score").text("with a score of " + result.score);
                    $("#bestMatchImage").attr("src", result.image);
                    modal.style.display = "block";

                    // When the user clicks on <span> (x), close the modal
                    span.onclick = function () {
                        modal.style.display = "none";
                    }

                    // When the user clicks anywhere outside of the modal, close it
                    window.onclick = function (event) {
                        if (event.target == modal) {
                            modal.style.display = "none";
                        }
                    };

                });
            };
            
        });

    </script>




</body>

</html>